{
    "transformations": [
        {
            "sourcePointer": "/files",
            "resultPointer": "/paths",
            "steps": [
                {
                    "sourcePointer": "/path",
                    "resultPointer": "/x"
                },
                {
                    "sourcePointer": "/path",
                    "resultPointer": "/y"
                }
            ]
        },
        {
            "append": true,
            "sourcePointer": "/files",
            "resultPointer": "/paths",
            "steps": [
                {
                    "sourcePointer": "/path",
                    "resultPointer": "/z"
                }
            ]
        },
        {
            "append": true,
            "resultPointer": "/paths",
            "sourcePointer": "/files",
            "steps": [
                {
                    "sourcePointer": "/path",
                    "resultPointer": ""
                }
            ]
        },
        {
            "sourcePointer": "/authors[i]/organizations",
            "resultPointer": "/creators[i]/affiliations",
            "steps": [
                {
                    "sourcePointer": "",
                    "resultPointer": ""
                },
                {
                    "sourcePointer": "/name",
                    "resultPointer": "/orgName"
                }
            ]
        },
        {
            "sourcePointer": "/authors[i]/organizations",
            "resultPointer": "/flattened",
            "steps": [
                {
                    "sourcePointer": "/name",
                    "resultPointer": "/org"
                },
                {
                    "sourcePointer": "/name",
                    "resultPointer": "/orgName"
                }
            ]
        },
        {
            "sourcePointer": "",
            "resultPointer": "/expressionsResults",
            "steps": [
                {
                    "resultPointer": "/literal",
                    "expressions": [
                        "\"literal\""
                    ]
                },
                {
                    "resultPointer": "/uuid",
                    "expressions": [
                        "withLogger(generateUuid())",
                        "remove()"
                    ]
                },
                {
                    "sourcePointer": "/numbers",
                    "resultPointer": "/total",
                    "expressions": [
                        "reduce(res = res + x)"
                    ]
                },
                {
                    "sourcePointer": "/numbers",
                    "resultPointer": "/count",
                    "expressions": [
                        "reduce(res = res + 1)"
                    ]
                },
                {
                    "sourcePointer": "/numbers",
                    "resultPointer": "/concat",
                    "expressions": [
                        "reduce(res = (res ? res + ', ' : '') + x)"
                    ]
                }
            ]
        },
        {
            "useResultAsSource": true,
            "resultPointer": "",
            "steps": [
                {
                    "sourcePointer": "/flattened",
                    "resultPointer": "/flattened",
                    "expressions": [
                        "script(set = new Set())",
                        "filter(res = set.add(x.orgName))"
                    ]
                }
            ]
        },
        {
            "useResultAsSource": true,
            "resultPointer": "",
            "steps": [
                {
                    "sourcePointer": "/flattened",
                    "resultPointer": "/flattened",
                    "expressions": [
                        "script(x.add({org: 'z', orgName: 'z'}); res = x)"
                    ]
                }
            ]
        }
    ]
}